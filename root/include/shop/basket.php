<?PHPif (!$_SESSION['valuvalyut']) {    $_SESSION['valuvalyut'] = '$USD';}$shop_type = 1; //?><style>    .basket_check_list_title:first-child {        padding-right: calc(100% - 645px);    }    @media (max-width: 922px) {        .basket_check_list_title:first-child {            padding-right: calc(103% - 645px);        }    }    @media (max-width: 890px) {        .basket_check_list_title:first-child {            padding-right: calc(106% - 645px);        }    }    @media (max-width: 835px) {        .basket_check_list_title:first-child {            padding-right: calc(112% - 645px);        }        .basket_check_list_title:nth-child(3) {            padding-right: 77px;        }        .basket_check_list_title:nth-child(2) {            padding-right: 59px;        }    }    @media (max-width: 800px) {        .basket_check_list_title:first-child {            padding-right: calc(116% - 645px);        }        .basket_check_list_title:nth-child(2) {            padding-right: 59px;        }        .basket_check_list_title:nth-child(3) {            padding-right: 66px;        }    }    @media (max-width: 786px) {        .basket_check_list_title:first-child {            padding-right: calc(118% - 645px);        }        .basket_check_list_title:nth-child(2) {            padding-right: 43px;        }        .basket_check_list_title:nth-child(3) {            padding-right: 54px;        }    }</style><div class="middle">    <div class="container">        <div class="page_title_wrapper">            <input type="hidden" class="js-limit" value="<?php echo checkRpCount($db, $prodid) ?>">            <h1 class="page_title"><?php echo $Basket['basket'][$lng]; ?></h1>        </div>        <div class="middle_content">            <section id="productInfo"></section>            <section class="basket_check" id="basket_holder" style="display:none;">                <div class="basket_check_list">                    <div class="basket_check_list_title"><?php echo $basket['prduct'][$lng]; ?></div>                    <div class="basket_check_list_title"><?php echo $basket['price'][$lng]; ?></div>                    <div class="basket_check_list_title"><?php echo $basket['shipping'][$lng]; ?></div>                    <div class="basket_check_list_title"><?php echo $basket['quantity'][$lng]; ?></div>                    <div class="basket_check_list_title"><?php echo $basket['total'][$lng]; ?></div>                </div>                <div id="adsa" class="basket_check_items">                </div>                <table style=" background-color: white; font-family:museosanscyr; font-size:12px;  float:left; display:block;">                    <tbody style='background-color: white;'>                    <tr>                        <td colspan="6" align="left">                            <div class="form_item form_checkbox">                                <input style="color:#259dab; " required="" type="checkbox" name="burden" id="yesbuy"                                       class="form_text">                                <label for="yesbuy" style="font-family: museosanscyr; font-size: 12px; color: black;">                                    <?php echo $basket['yesbuy'][$lng]; ?>                                </label>                                <br>                                <input required="" type="checkbox" name="termandco" id="accepttc" class="form_text">                                <label for="accepttc" style="font-family: museosanscyr; font-size: 12px; color: black;">                                    <?php echo $basket['termtext'][$lng]; ?>                                </label>                            </div>                        </td>                    </tr>                    </tbody>                </table>                <br clear="both">                <p style="color:red; margin-top:10px ; ">                    <?php echo $basket['reminder'][$lng]; ?>                </p>                <br clear="right">                <div class="basket_controls">                    <div class="basket_controls_goback">                        <a href="<?php echo $site_url . $lng . '/shop/1/'; ?>"><?php echo $basket['continueshop'][$lng]; ?></a>                    </div>                    <div class="basket_sum">                        <div class="total_price_wrap">                            <div class="basket_sum_total"><span><?php echo $basket['price'][$lng]; ?>:</span>                                <div class="total_price" style="font-size: 20px;" id="price">0 <span>USD</span></div>                            </div>                            <div class="basket_sum_total"><span><?php echo $basket['shipping'][$lng]; ?>:</span>                                <div class="total_price" style="font-size: 20px;" id="shipping">0 <span>USD</span></div>                            </div>                            <div class="basket_sum_total"><span><?php echo $basket['total'][$lng]; ?>:</span>                                <div class="total_price" id="total">0 <span>USD</span></div>                            </div>                            <div class="basket_sum_submit">                                <input type="submit" value='<?php echo $basket['checkout'][$lng]; ?>' onclick="pot();"                                       id="checkoutbtn">                            </div>                        </div>                    </div>                </div>            </section>            <section id="empty_basket" style="display:none; margin:20px; text-align:center;">                <div style="">                    <img src="<?PHP echo $site_url . 'images/noResults2.png'; ?>"                         style="width:25%; margin-bottom: 20px;"><br>                    <?php echo $basket['emptybask'][$lng]; ?> <br>                    <div class="separatorx"></div>                    <div class="add_to_basketx">                        <a style=""                           href="<?php echo $site_url . $lng . '/shop/1/'; ?>"><?php echo $basket['continueshop'][$lng]; ?></a>                    </div>                </div>            </section>        </div>    </div></div><script src="<?php echo $site_url; ?>js/jquery.js"></script><script src="<?= $site_url ?>user/js/custom.min.js"></script><script type="text/javascript">    let siteUrl = "<?php echo $site_url?>" + 'ajax/basket_checkprcount.php';    let local = JSON.parse(window.localStorage.getItem('data1'));    let stockControl = '';    if (local !== null && local.length > 0) {        for (let i = 0; i < local.length; i++) {            stockControl += local[i].id + 'x' + local[i].dataCount + ',';        }        stockControl = stockControl.slice(0, -1);        var stockNumberAjax;        $.ajax({            url: siteUrl,            method: 'POST',            data: {"stockControl": stockControl},            dataType: "text",            async: false,            global: false,        }).done(function (results) {            stockNumberAjax = JSON.parse(results);        });    }    function pot() {        if (document.getElementById("yesbuy").checked == false || document.getElementById("accepttc").checked == false) {            alert("You must accept terms and conditions");        } else {            var checkProduct = parseInt(localStorage.getItem("basketCount1"));            if (isNaN(checkProduct) || checkProduct == 0) {                alert("You have to buy at least  1 product")            } else {                window.location.href = "<?PHP echo $site_url . $lng; ?>/shop/shippay/";            }        }    }    function update() {        var teras = localStorage.getItem("data1");        var terasp = JSON.parse(teras);        if (terasp == null || terasp == '') {            terasp = 0;        }        var proship = 0;        var proprice = 0;        var total = 0;        var tat = "";        var productInfo = "";        for (var i = 0; i < terasp.length; i++) {            var shoptype = parseInt(terasp[i].shoptype);            var currency = terasp[i].currency;            if (shoptype ==<?PHP echo $shop_type; ?>) {                var minitotal;                for (let j = 0; j < stockNumberAjax.length; j++) {                    if (terasp[i].id == stockNumberAjax[j].pid) {                        if (stockNumberAjax[j].count < 1) {                            // terasp[i].price = 0;                            // terasp[i].ship = 0;                            let basketCount2 = parseInt(localStorage.getItem("basketCount1")) - terasp[i].dataCount;                            localStorage.setItem("basketCount1", JSON.stringify(basketCount2));                            terasp[i].dataCount = 0;                            localStorage.setItem("data1", JSON.stringify(terasp));                            proship = proship + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            proprice = proprice + (parseInt(terasp[i].price) * terasp[i].dataCount);                            minitotal = (parseInt(terasp[i].price) * terasp[i].dataCount) + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            tat = tat + "<div class='basket_check_items_item'><div class='basket_check_items_item_photo'><img style='max-width:100px;' src='<?=$site_url?>cms/images/" + terasp[i].image + "' alt=''></div><div class='basket_check_items_item_title'><div class='item_name'>" + terasp[i].name + "</div><div class='item_article'>Артикул: <span>45971644</span></div></div><div class='basket_check_items_item_price'> Out of Stock </div><div class='basket_check_items_item_price'>  </div><div class='basket_check_items_item_counter'><div class='good_basket clearfix'><div class='good_basket_btns clearfix'><div onclick='reduce(" + JSON.stringify(terasp[i].id) + ")' class='good_basket_min'></div><input type='text'  disabled  class='good_basket_input form_text' value='" + terasp[i].dataCount + "'><div onclick='increase(" + JSON.stringify(terasp[i].id) + ")'  class='good_basket_plus'></div></div></div></div><div class='basket_check_items_item_total'>" + minitotal + " " + terasp[i].currency + "</div><div onclick='dead(" + JSON.stringify(terasp[i].id) + ")' class='item_close'><img src='<?php echo $site_url; ?>images/close-icon.png' alt=''></div></div>";                            productInfo = productInfo + `<div class="info"> ${terasp[i].name} product out of stock  </div>`;                        } else if ((stockNumberAjax[j].count > 0) && (stockNumberAjax[j].count < terasp[i].dataCount)) {                            let basketCount3 = terasp[i].dataCount - stockNumberAjax[j].count;                            basketCount3 = parseInt(localStorage.getItem("basketCount1")) - basketCount3;                            localStorage.setItem("basketCount1", JSON.stringify(basketCount3));                            terasp[i].dataCount = stockNumberAjax[j].count;                            localStorage.setItem("data1", JSON.stringify(terasp));                            proship = proship + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            proprice = proprice + (parseInt(terasp[i].price) * terasp[i].dataCount);                            minitotal = (parseInt(terasp[i].price) * terasp[i].dataCount) + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            tat = tat + "<div class='basket_check_items_item'><div class='basket_check_items_item_photo'><img style='max-width:100px;' src='<?=$site_url?>cms/images/" + terasp[i].image + "' alt=''></div><div class='basket_check_items_item_title'><div class='item_name'>" + terasp[i].name + "</div><div class='item_article'>Артикул: <span>45971644</span></div></div><div class='basket_check_items_item_price'>" + terasp[i].price + " " + terasp[i].currency + "</div><div class='basket_check_items_item_price'>" + terasp[i].ship + " " + terasp[i].currency + "</div><div class='basket_check_items_item_counter'><div class='good_basket clearfix'><div class='good_basket_btns clearfix'><div onclick='reduce(" + JSON.stringify(terasp[i].id) + ")' class='good_basket_min'></div><input type='text'  disabled  class='good_basket_input form_text' value='" + terasp[i].dataCount + "'><div onclick='increase(" + JSON.stringify(terasp[i].id) + ")'  class='good_basket_plus'></div></div></div></div><div class='basket_check_items_item_total'>" + minitotal + " " + terasp[i].currency + "</div><div onclick='dead(" + JSON.stringify(terasp[i].id) + ")' class='item_close'><img src='<?php echo $site_url; ?>images/close-icon.png' alt=''></div></div>";                            productInfo = productInfo + "<div> " + terasp[i].name + " last  " + terasp[i].dataCount + " product  left</div>";                        } else {                            proship = proship + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            proprice = proprice + (parseInt(terasp[i].price) * terasp[i].dataCount);                            minitotal = (parseInt(terasp[i].price) * terasp[i].dataCount) + (parseInt(terasp[i].ship) * terasp[i].dataCount);                            tat = tat + "<div class='basket_check_items_item'><div class='basket_check_items_item_photo'><img style='max-width:100px;' src='<?=$site_url?>cms/images/" + terasp[i].image + "' alt=''></div><div class='basket_check_items_item_title'><div class='item_name'>" + terasp[i].name + "</div><div class='item_article'>Артикул: <span>45971644</span></div></div><div class='basket_check_items_item_price'>" + terasp[i].price + " " + terasp[i].currency + "</div><div class='basket_check_items_item_price'>" + terasp[i].ship + " " + terasp[i].currency + "</div><div class='basket_check_items_item_counter'><div class='good_basket clearfix'><div class='good_basket_btns clearfix'><div onclick='reduce(" + JSON.stringify(terasp[i].id) + ")' class='good_basket_min'></div><input type='text'  disabled  class='good_basket_input form_text' value='" + terasp[i].dataCount + "'><div onclick='increase(" + JSON.stringify(terasp[i].id) + ")'  class='good_basket_plus'></div></div></div></div><div class='basket_check_items_item_total'>" + minitotal + " " + terasp[i].currency + "</div><div onclick='dead(" + JSON.stringify(terasp[i].id) + ")' class='item_close'><img src='<?php echo $site_url; ?>images/close-icon.png' alt=''></div></div>";                        }                    }                }            }        }        total = (proship + proprice);        $('#productInfo').html(productInfo);        $('#adsa').html(tat);        $('#price').html(proprice + " " + currency);        $('#shipping').html(proship + " " + currency);        $('#total').html(total + " " + currency);        var basketCount1Dat = parseInt(localStorage.getItem("basketCount1"));        var basketCount2Dat = JSON.parse(localStorage.getItem("data1"));        if (basketCount2Dat === null || basketCount2Dat.length === 0) {            document.getElementById('basketMain').innerHTML = "(" + 0 + ")";            document.getElementById('basket_holder').style.display = "none";            document.getElementById('empty_basket').style.display = "block";        } else {            document.getElementById('basketMain').innerHTML = "(" + basketCount1Dat + ")";            document.getElementById('basket_holder').style.display = "block";            document.getElementById('empty_basket').style.display = "none";        }    }    update();    function increase(did) {        var fresh = JSON.parse(localStorage.getItem("data1"));        for (var w = 0; w < fresh.length; w++) {            if (fresh[w].id == did) {                fresh[w].dataCount = parseInt(fresh[w].dataCount) + 1;            }        }        var freshStr = JSON.stringify(fresh);        localStorage.setItem("data1", freshStr);        var basketMain;        basketMain = parseInt(localStorage.getItem("basketCount1"));        localStorage.setItem("basketCount1", basketMain + 1); // add 1 after click        update();    }    function reduce(did) {        var fresh = JSON.parse(localStorage.getItem("data1"));        for (var w = 0; w < fresh.length; w++) {            if (fresh[w].id == did && fresh[w].dataCount > 1) {                fresh[w].dataCount = parseInt(fresh[w].dataCount) - 1;                var basketMain;                basketMain = parseInt(localStorage.getItem("basketCount1"));                localStorage.setItem("basketCount1", basketMain - 1); // add 1 after click            }        }        var freshStr = JSON.stringify(fresh);        localStorage.setItem("data1", freshStr);        update();    }    function dead(did) {        var fresh = JSON.parse(localStorage.getItem("data1"));        for (var w = 0; w < fresh.length; w++) {            if (fresh[w].id == did) {                if (confirm('Are you sure to remove  \" ' + fresh[w].name + ' \"  from your basket?')) {                    var deleteBasketMain = fresh[w].dataCount;                    fresh.splice(w, 1);                    var basketMain = parseInt(localStorage.getItem("basketCount1"));                    localStorage.setItem("basketCount1", basketMain - deleteBasketMain);                } else { 	//	alert("to be careful");                }            } else {            }        }        var freshStr = JSON.stringify(fresh);        localStorage.setItem("data1", freshStr);        update();    }</script><style>    .add_to_basketx a {        padding: 0;        outline: none;        font: inherit;        margin: 0px auto;        margin-top: 10px;        margin-bottom: 50px;        vertical-align: middle;        box-sizing: border-box;        cursor: pointer;        display: block;        width: 190px;        height: 48px;        background: #43b9da;        color: #fff;        text-align: center;        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);        font-weight: 400;        text-decoration: none;        transition: .3s;        line-height: 46px;        font-size: 1vw;        border: none;    }    .add_to_basketx a:hover {        opacity: .75;    }    .separatorx {        max-width: 400px;        margin: 0 auto 20px;        border-bottom: 1px solid #dadbdb;        padding-top: 20px;    }    .w-300 {        width: 300px;    }    #productInfo > div {        position: relative;        padding: 12px 20px;        margin-bottom: 16px;        border: 1px solid #f5c6cb;        border-radius: 4px;        color: #721c24;        background-color: #f8d7da;    }</style>